
# flower_startup.sh - Flower monitoring startup script
#!/bin/bash
set -e

echo "üå∏ Starting ErgoAI Flower Monitoring..."

# Wait for Redis to be ready
echo "‚è≥ Waiting for Redis..."
while ! nc -z ${REDIS_HOST:-redis} ${REDIS_PORT:-6379}; do
    sleep 1
done
echo "‚úÖ Redis is ready"

# Wait for worker to be ready
echo "‚è≥ Waiting for worker to be ready..."
sleep 30

# Start Flower
echo "üå∏ Starting Flower monitoring..."
exec celery -A celery_app flower --port=5555 --broker=redis://redis:6379/0
